<!DOCTYPE html>
<html>

<head>
<title>MIDI Player test</title>
</head>
<script src="../../polyfills/webcomponents-lite.js"></script>

<script src="../../sdk/WebAudioSDK.js"></script>
<script src="../JZZ/JZZ.js"></script>
<script src="../JZZ/JZZ.midi.SMF.js"></script>
<script src="../JZZ/JZZ.gui.Player.js"></script>
<script src="main.js"></script>

<body>
<p>MIDI output goes to the console.log ...</p>
</body>

<script>
  var ctx = new AudioContext();
  var player = new JazzSoftMidiPlayer(ctx, '.');
  player.load().then((plug) => {
    player.loadGui().then((elem) => {
      document.body.appendChild(elem);
      plug.outputsMidi[0].connect(function(msg) { console.log(msg.toString()); });
      plug.load(JZZ.lib.fromBase64('TVRoZAAAAAYAAAABAGBNVHJrAAAAHACQSH9ggEhAAJBMf2CATEAAkE9/YIBPQAD/LwA='));
      plug.loop(true);
      plug.play();
    });
  });
</script>

</html>